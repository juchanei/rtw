# 30 : 인라인 함수는 미주알고주알 따져서 이해해 두자

## 문제인식

아무생각 없이 인라인을 남발했다가는

- 목적코드의 크기가 심각하게 늘어납니다.
  특히 생성자/소멸자는 컴파일러가 만드는 코드가 많으므로, 이를 인라인으로 했다가는 코드의 크기가 급격히 늘어납니다.
- 페이징 횟수가 늘어나고, 명령어 캐시 적중률이 떨어질 수 있습니다.

인라인 키워드는 '요청'입니다.
해당 환경에 맞지 않으면 아웃라인으로 처리됩니다.
특히 가상함수 같은 것은 인라인해주지 않습니다.
가상함수의 결정은 런타임에 일어나는 반면, 인라인은 컴파일타임에 일어나기 때문입니다.

인라인 함수는 대체로 헤더파일에 들어있어야 하는 것이 맞습니다.
인라인 함수의 호출을 본문으로 바꾸치기 하려면, 그 함수의 본문 형태를 알아야하기 때문입니다.

라이브러리 차원에서 바이너리 업그레이드는 제공할 수 없습니다.
인라인 함수는 사용자 코드에 본문으로 교체되기 때문에, 함수 본문이 바뀌면 사용자 코드도 반드시 다시 컴파일 되어야 하기 때문입니다.

## 문제해결

인라인은 따져야할 것이 많습니다.
우선, 가능하면 인라인 하지마세요.
꼭 인라인 해야만 하는 함수는 **정말 단순한 함수** 뿐입니다.
인라인이 좋다고 해서 **80-20 법칙** 을 잊어서는 안됩니다.
20%의 코드에 필요한 경우에만 사용하세요.

## 정리

- 인라인은 작고, 자주 호출되는 함수에만 사용합니다.
